# Client Version Publishing Flow

## ?? Complete Workflow Diagram

```
???????????????????????????????????????????????????????????????????????????
?                    DEVELOPER WORKSTATION                                ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Step 1: Update Version                                                ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? SecureBootWatcher.Client.csproj                              ?     ?
?  ?                                                              ?     ?
?  ? <Version>1.2.0</Version>                                     ?     ?
?  ? <AssemblyVersion>1.2.0.0</AssemblyVersion>                  ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                           ?                                            ?
?                           ?                                            ?
?  Step 2: Run Publish Script                                           ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? .\scripts\Publish-ClientVersion.ps1 -Version "1.2.0"        ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                           ?                                            ?
?                           ?                                            ?
?  ?????????????????????????????????????????????????????                ?
?  ? 1. Build Project                                  ?                ?
?  ?    dotnet build -c Release                        ?                ?
?  ?                                                   ?                ?
?  ? 2. Publish Binaries                               ?                ?
?  ?    dotnet publish -r win-x86                      ?                ?
?  ?                                                   ?                ?
?  ? 3. Create ZIP Package                             ?                ?
?  ?    SecureBootWatcher-Client-1.2.0.zip            ?                ?
?  ?                                                   ?                ?
?  ? 4. Calculate SHA256 Checksum                      ?                ?
?  ?    E3B0C4429...                                   ?                ?
?  ?????????????????????????????????????????????????????                ?
?                           ?                                            ?
?                           ?                                            ?
?  Local Package Created:                                               ?
?  release\1.2.0\SecureBootWatcher-Client-1.2.0.zip                     ?
?                                                                        ?
??????????????????????????????????????????????????????????????????????????
                                 ?
                                 ?
???????????????????????????????????????????????????????????????????????????
?                    AZURE BLOB STORAGE                                   ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Step 3: Upload to Azure (Optional)                                    ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? az storage blob upload                                       ?     ?
?  ?   --container client-packages                                ?     ?
?  ?   --name SecureBootWatcher-Client-1.2.0.zip                 ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                           ?                                            ?
?                           ?                                            ?
?  Azure Blob Storage:                                                   ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? https://secbootcert.blob.core.windows.net/                   ?     ?
?  ?   client-packages/                                           ?     ?
?  ?     ?? SecureBootWatcher-Client-1.0.0.zip                   ?     ?
?  ?     ?? SecureBootWatcher-Client-1.1.0.zip                   ?     ?
?  ?     ?? SecureBootWatcher-Client-1.2.0.zip ? NEW              ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                        ?
??????????????????????????????????????????????????????????????????????????
                                 ?
                                 ?
???????????????????????????????????????????????????????????????????????????
?                    API SERVER                                           ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Step 4: Update API Configuration                                      ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? SecureBootDashboard.Api/appsettings.json                     ?     ?
?  ?                                                              ?     ?
?  ? "ClientUpdate": {                                            ?     ?
?  ?   "LatestVersion": "1.2.0.0",                               ?     ?
?  ?   "DownloadUrl": "https://secbootcert.blob...",            ?     ?
?  ?   "Checksum": "E3B0C4429...",                               ?     ?
?  ?   "ReleaseDate": "2025-01-15T10:00:00Z"                     ?     ?
?  ? }                                                            ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                           ?                                            ?
?                           ?                                            ?
?  Step 5: Restart API                                                   ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? iisreset                                                     ?     ?
?  ? OR                                                           ?     ?
?  ? az webapp restart --name YourAppService                      ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                        ?
??????????????????????????????????????????????????????????????????????????
                                 ?
                                 ?
???????????????????????????????????????????????????????????????????????????
?                    CLIENT DEVICES (OLD VERSION 1.1.0)                   ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Step 6: Clients Check for Updates                                     ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? GET /api/ClientUpdate/check?currentVersion=1.1.0             ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                           ?                                            ?
?                           ?                                            ?
?  API Response:                                                         ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? {                                                            ?     ?
?  ?   "currentVersion": "1.1.0.0",                               ?     ?
?  ?   "latestVersion": "1.2.0.0",                               ?     ?
?  ?   "updateAvailable": true,                                   ?     ?
?  ?   "downloadUrl": "https://secbootcert.blob..."              ?     ?
?  ? }                                                            ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                           ?                                            ?
?                           ?                                            ?
?  Alert Added to Report:                                               ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? ?? Client update available: Version 1.2.0                    ?     ?
?  ?    (current: 1.1.0)                                          ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                        ?
??????????????????????????????????????????????????????????????????????????
                                 ?
                                 ?
???????????????????????????????????????????????????????????????????????????
?                    DASHBOARD                                            ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Step 7: Monitor Adoption                                              ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? /ClientVersions                                              ?     ?
?  ?                                                              ?     ?
?  ? ????????????????????????????????????????????????            ?     ?
?  ? ? Version 1.2.0 [Up-to-Date]    (0 devices)   ?            ?     ?
?  ? ? Version 1.1.0 [Outdated]    (148 devices)   ?            ?     ?
?  ? ? Version 1.0.0 [Unsupported]   (2 devices)   ?            ?     ?
?  ? ????????????????????????????????????????????????            ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                        ?
??????????????????????????????????????????????????????????????????????????
                                 ?
                                 ?
???????????????????????????????????????????????????????????????????????????
?                    DEPLOYMENT (INTUNE/GPO/SCCM)                         ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Step 8: Deploy New Version                                            ?
?                                                                         ?
?  Option A: Intune Win32 App                                            ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? 1. Extract package                                           ?     ?
?  ? 2. Add scripts (Install/Uninstall/Detect)                    ?     ?
?  ? 3. Add certificate PFX                                        ?     ?
?  ? 4. Run IntuneWinAppUtil.exe                                  ?     ?
?  ? 5. Upload to Intune                                          ?     ?
?  ? 6. Assign to device groups                                   ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                         ?
?  Option B: Group Policy (GPO)                                          ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? 1. Copy ZIP to NETLOGON share                                ?     ?
?  ? 2. Create GPO startup script                                 ?     ?
?  ? 3. Link to target OU                                         ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                         ?
?  Option C: SCCM/ConfigMgr                                              ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? 1. Create application package                                ?     ?
?  ? 2. Distribute to DPs                                         ?     ?
?  ? 3. Deploy to collection                                      ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                         ?
??????????????????????????????????????????????????????????????????????????
                                 ?
                                 ?
???????????????????????????????????????????????????????????????????????????
?                    CLIENT DEVICES (UPDATING TO 1.2.0)                   ?
???????????????????????????????????????????????????????????????????????????
?                                                                         ?
?  Deployment Progress:                                                  ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? Hour 1:  Version 1.2.0 (10 devices)  ? Pilot group           ?     ?
?  ? Day 1:   Version 1.2.0 (50 devices)  ? Wave 1                ?     ?
?  ? Day 2:   Version 1.2.0 (120 devices) ? Wave 2                ?     ?
?  ? Day 3:   Version 1.2.0 (148 devices) ? Complete              ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                         ?
?  Dashboard Updates:                                                    ?
?  ????????????????????????????????????????????????????????????????     ?
?  ? Version 1.2.0 [Up-to-Date]  (148 devices) ?                 ?     ?
?  ? Version 1.0.0 [Unsupported]   (2 devices) ??                 ?     ?
?  ????????????????????????????????????????????????????????????????     ?
?                                                                         ?
???????????????????????????????????????????????????????????????????????????
```

## ?? Quick Reference Flow

```
Developer ? Publish Script ? Azure Storage ? API Config ? Clients Detect ? Dashboard ? Deploy ? Monitor
```

## ?? Command Summary

```powershell
# STEP 1: Publish
.\scripts\Publish-ClientVersion.ps1 -Version "1.2.0" -UploadToAzure -AzureStorageAccount "secbootcert" -UpdateApiConfig

# STEP 2: Verify
Invoke-RestMethod "https://your-api.com/api/ClientUpdate/version"

# STEP 3: Deploy (Intune example)
# - Upload .intunewin package to Intune
# - Assign to groups

# STEP 4: Monitor
# - Navigate to /ClientVersions dashboard
# - Track adoption percentage
```

## ?? Key Files

| File | Location | Purpose |
|------|----------|---------|
| Version Source | `SecureBootWatcher.Client.csproj` | `<Version>1.2.0</Version>` |
| Package Output | `release\1.2.0\SecureBootWatcher-Client-1.2.0.zip` | Deployment package |
| API Config | `SecureBootDashboard.Api\appsettings.json` | `ClientUpdate` section |
| Dashboard | `/ClientVersions` | Monitor adoption |

## ?? Timeline

```
T+0:    Run Publish-ClientVersion.ps1
T+5min: Package created and uploaded
T+10min: API config updated, API restarted
T+15min: Deploy to pilot group (10 devices)
T+1hr:  Pilot devices report version 1.2.0
T+4hr:  Deploy to Wave 1 (50 devices)
T+1day: Deploy to Wave 2 (100 devices)
T+3days: 100% adoption complete
```

---

**This diagram shows the complete end-to-end flow from developer workstation to full fleet deployment.**
